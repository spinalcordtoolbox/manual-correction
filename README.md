# Manual correction

This repository contains scripts for the manual correction of spinal cord labels. Currently supported labels are: 
- spinal cord segmentation
- gray matter segmentation
- lesion segmentation (e.g., MS or SCI lesions)
- disc labels
- ponto-medullary junction (PMJ) label

## Installation

```console
git clone https://github.com/spinalcordtoolbox/manual-correction.git
cd manual-correction
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

## Examples

For examples, see [wiki](https://github.com/spinalcordtoolbox/manual-correction/wiki)

## Usage

> **Note** All scripts currently assume BIDS-compliant data. For more information about the BIDS standard, please visit http://bids.neuroimaging.io.

### `package_for_correction.py`

If the manual correction is done by someone else than the person doing the processing, this script packages the processed images and existing labels (segmentation, disc labels, etc.) and creates a single ZIP file that can conveniently be sent to collaborators.

You can specify a sub-set of subjects to be included in this package by inputing a YML file corresponding to the 'failed' cases (red cross) generated by [SCT's QC HTML report](https://spinalcordtoolbox.com/overview/concepts/inspecting-results-qc-fsleyes.html#how-do-i-use-the-qc-report).

[TODO]: how to run

### `manual_correction.py`

This script loops across subjects listed in the YML file and opens a viewer to correct the labels (segmentations, disc labels, etc.). 

Example usage:
[TODO, suggestions:
- take bits from https://github.com/spinalcordtoolbox/manual-correction/wiki,
- reduce it (eg: remove duplication, remove info about viewer, it's alread in the usage, so tell users how to display the usage)
- only show ONE usage example, so merge the examples in the wiki
- for specific cases, add a note (eg: here's how to do if you have 2 contrasts)
- i'm not sure we need the following thing, if we do, put it as a note --> For the correction of vertebral labeling and ponto-medullary junction (PMJ), [sct_label_utils](https://github.com/spinalcordtoolbox/spinalcordtoolbox/blob/master/spinalcordtoolbox/scripts/sct_label_utils.py) is used.

### `copy_files_to_derivatives.py`

This script copies manually corrected labels (segmentations, disc labels, etc.) from your local `derivatives/labels` folder to the already existing dataset's `derivatives/labels` folder.
